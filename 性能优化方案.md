# é¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“Š å½“å‰æŠ€æœ¯æ ˆåˆ†æ

- âœ… **å·²ä½¿ç”¨ï¼š** Redisã€MySQLã€MinIOã€MyBatis Plus
- âŒ **æœªä½¿ç”¨ï¼š** æ¶ˆæ¯é˜Ÿåˆ—ã€æœç´¢å¼•æ“ã€CDNã€åˆ†å¸ƒå¼é”ã€Spring Cache

---

## ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

### 1. â­â­â­ é«˜ä¼˜å…ˆçº§ï¼šSpring Cache ç¼“å­˜ï¼ˆæ— éœ€æ–°å¢ä¸­é—´ä»¶ï¼‰

**ç°çŠ¶ï¼š** é¡¹ç›®å·²ä½¿ç”¨ Redisï¼Œä½†æ²¡æœ‰ä½¿ç”¨ Spring Cache æ³¨è§£ï¼Œçƒ­ç‚¹æ•°æ®æ²¡æœ‰ç¼“å­˜

**ä¼˜åŒ–ç‚¹ï¼š**
- å•†å“åˆ—è¡¨ç¼“å­˜
- åˆ†ç±»æ•°æ®ç¼“å­˜
- ç”¨æˆ·ä¿¡æ¯ç¼“å­˜
- è®¢å•è¯¦æƒ…ç¼“å­˜

**å®ç°æ­¥éª¤ï¼š**

#### 1.1 æ·»åŠ ä¾èµ–ï¼ˆå·²åœ¨ pom.xml ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«ï¼‰

```xml
<!-- Spring Cache æ”¯æŒ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-cache</artifactId>
</dependency>
```

#### 1.2 é…ç½® Redis Cache

åˆ›å»º `coffee-common/src/main/java/com/coffee/common/config/RedisCacheConfig.java`:

```java
package com.coffee.common.config;

import org.springframework.cache.CacheManager;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.cache.RedisCacheConfiguration;
import org.springframework.data.redis.cache.RedisCacheManager;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.RedisSerializationContext;
import org.springframework.data.redis.serializer.StringRedisSerializer;

import java.time.Duration;

/**
 * Redis ç¼“å­˜é…ç½®
 */
@Configuration
@EnableCaching
public class RedisCacheConfig {

    @Bean
    public CacheManager cacheManager(RedisConnectionFactory redisConnectionFactory) {
        // é…ç½®åºåˆ—åŒ–å™¨
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
                .entryTtl(Duration.ofMinutes(30)) // é»˜è®¤è¿‡æœŸæ—¶é—´ 30 åˆ†é’Ÿ
                .serializeKeysWith(RedisSerializationContext.SerializationPair
                        .fromSerializer(new StringRedisSerializer()))
                .serializeValuesWith(RedisSerializationContext.SerializationPair
                        .fromSerializer(new GenericJackson2JsonRedisSerializer()))
                .disableCachingNullValues(); // ä¸ç¼“å­˜ null å€¼

        // åˆ›å»ºç¼“å­˜ç®¡ç†å™¨
        return RedisCacheManager.builder(redisConnectionFactory)
                .cacheDefaults(config)
                .build();
    }
}
```

#### 1.3 åœ¨ Service ä¸­ä½¿ç”¨ç¼“å­˜

**å•†å“åˆ—è¡¨ç¼“å­˜ï¼š**

```java
@Service
public class ProductServiceImpl extends ServiceImpl<ProductMapper, Product> implements ProductService {
    
    /**
     * æ–¹å¼ä¸€ï¼šä½¿ç”¨è‡ªå®šä¹‰ KeyGeneratorï¼ˆæ¨èï¼‰
     * ä¼˜ç‚¹ï¼škey ç”Ÿæˆé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
     */
    @Cacheable(value = "product:list", keyGenerator = "cacheKeyGenerator")
    @Override
    public Page<Product> getList(PageParam pageParam) {
        // åŸæœ‰é€»è¾‘...
    }
    
    /**
     * æ–¹å¼äºŒï¼šä½¿ç”¨ SpEL è¡¨è¾¾å¼ï¼ˆç®€å•åœºæ™¯ï¼‰
     * é€‚ç”¨ï¼šå‚æ•°ç®€å•ï¼Œkey ç»„åˆä¸å¤æ‚çš„æƒ…å†µ
     */
    @Cacheable(value = "product:detail", key = "#id")
    public ProductDTO getDetail(Long id) {
        // å•†å“è¯¦æƒ…
    }
    
    /**
     * æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨ä½¿ç”¨ RedisTemplateï¼ˆå¤æ‚åœºæ™¯ï¼Œä¸æ¨èç”¨äºç®€å•ç¼“å­˜ï¼‰
     * é€‚ç”¨ï¼šéœ€è¦å¤æ‚çš„ç¼“å­˜é€»è¾‘ï¼Œæˆ–éœ€è¦ç¼“å­˜éƒ¨åˆ†ç»“æœ
     */
    @Autowired
    private StringRedisTemplate redisTemplate;
    
    public Page<Product> getListManual(PageParam pageParam) {
        // æ‰‹åŠ¨æ„å»º key
        String cacheKey = CacheKeyConstants.buildKey(CacheKeyConstants.Product.LIST, 
            pageParam.getPage(), pageParam.getPageSize());
        
        // ä»ç¼“å­˜è·å–
        String cached = redisTemplate.opsForValue().get(cacheKey);
        if (cached != null) {
            // ååºåˆ—åŒ–è¿”å›
            return JSON.parseObject(cached, new TypeReference<Page<Product>>() {});
        }
        
        // æŸ¥è¯¢æ•°æ®åº“
        Page<Product> result = this.page(productPage, wrapper);
        
        // å†™å…¥ç¼“å­˜
        redisTemplate.opsForValue().set(cacheKey, JSON.toJSONString(result), 30, TimeUnit.MINUTES);
        
        return result;
    }
    
    @CacheEvict(value = {"product:list", "product:detail"}, allEntries = true)
    @Override
    public boolean update(ProductDTO productDTO) {
        // æ›´æ–°æ—¶æ¸…é™¤ç¼“å­˜
    }
    
    @Cacheable(value = "product:detail", key = "#id")
    @Override
    public ProductDTO getDetail(Long id) {
        // å•†å“è¯¦æƒ…ç¼“å­˜
    }
}
```

**åˆ†ç±»æ•°æ®ç¼“å­˜ï¼š**

```java
@Service
public class CategoryServiceImpl extends ServiceImpl<CategoryMapper, Category> implements CategoryService {
    
    @Cacheable(value = "category:enabled", key = "'all'")
    @Override
    public List<Category> getEnabledCategories() {
        return this.list(new LambdaQueryWrapper<Category>()
                .eq(Category::getStatus, 1)
                .orderByDesc(Category::getSort));
    }
    
    @CacheEvict(value = "category:enabled", allEntries = true)
    @Override
    public boolean updateById(Category entity) {
        // æ›´æ–°æ—¶æ¸…é™¤ç¼“å­˜
        return super.updateById(entity);
    }
}
```

---

### 2. â­â­â­ é«˜ä¼˜å…ˆçº§ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRabbitMQ / RocketMQï¼‰

**ä½œç”¨ï¼š** å¼‚æ­¥å¤„ç†ã€å‰Šå³°å¡«è°·ã€è§£è€¦

**é€‚ç”¨åœºæ™¯ï¼š**
- è®¢å•åˆ›å»ºåçš„å¼‚æ­¥é€šçŸ¥ï¼ˆé‚®ä»¶ã€çŸ­ä¿¡ï¼‰
- åº“å­˜æ‰£å‡çš„å¼‚æ­¥å¤„ç†
- è®¢å•æ”¯ä»˜æˆåŠŸåçš„ç§¯åˆ†å‘æ”¾
- ä¼˜æƒ åˆ¸å‘æ”¾çš„å¼‚æ­¥å¤„ç†

**ä¸­é—´ä»¶é€‰æ‹©ï¼š**
- **RabbitMQ**ï¼ˆæ¨èï¼Œè½»é‡çº§ï¼Œæ˜“éƒ¨ç½²ï¼‰
- **RocketMQ**ï¼ˆé˜¿é‡Œäº‘ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼‰
- **Kafka**ï¼ˆå¤§æ•°æ®åœºæ™¯ï¼‰

**å®ç°æ­¥éª¤ï¼ˆä»¥ RabbitMQ ä¸ºä¾‹ï¼‰ï¼š**

#### 2.1 æ·»åŠ ä¾èµ–

```xml
<!-- RabbitMQ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-amqp</artifactId>
</dependency>
```

#### 2.2 é…ç½® RabbitMQ

`application.yml`:

```yaml
spring:
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /
    # æ¶ˆæ¯ç¡®è®¤æœºåˆ¶
    publisher-confirm-type: correlated
    publisher-returns: true
    # æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶
    listener:
      simple:
        acknowledge-mode: manual
        retry:
          enabled: true
          max-attempts: 3
```

#### 2.3 åˆ›å»ºé˜Ÿåˆ—é…ç½®

```java
@Configuration
public class RabbitMQConfig {
    
    // è®¢å•é˜Ÿåˆ—
    public static final String ORDER_QUEUE = "order.queue";
    
    @Bean
    public Queue orderQueue() {
        return new Queue(ORDER_QUEUE, true);
    }
}
```

#### 2.4 å‘é€æ¶ˆæ¯

```java
@Service
public class OrderServiceImpl {
    
    @Autowired
    private RabbitTemplate rabbitTemplate;
    
    @Override
    public OmsOrder createOrder(CreateOrderRequest request) {
        // åˆ›å»ºè®¢å•...
        OmsOrder order = ...;
        
        // å‘é€è®¢å•åˆ›å»ºæ¶ˆæ¯åˆ°é˜Ÿåˆ—
        rabbitTemplate.convertAndSend(
            RabbitMQConfig.ORDER_QUEUE,
            new OrderMessage(order.getId(), order.getMemberId())
        );
        
        return order;
    }
}
```

#### 2.5 æ¶ˆè´¹æ¶ˆæ¯

```java
@Component
@RabbitListener(queues = RabbitMQConfig.ORDER_QUEUE)
public class OrderMessageConsumer {
    
    @RabbitHandler
    public void handleOrderMessage(OrderMessage message, Channel channel, Message msg) {
        try {
            // å¤„ç†è®¢å•åˆ›å»ºåçš„ä¸šåŠ¡ï¼ˆå‘é€é€šçŸ¥ã€å‘æ”¾ç§¯åˆ†ç­‰ï¼‰
            handleOrderCreated(message);
            
            // æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯
            channel.basicAck(msg.getMessageProperties().getDeliveryTag(), false);
        } catch (Exception e) {
            // æ‹’ç»æ¶ˆæ¯ï¼Œé‡æ–°å…¥é˜Ÿ
            channel.basicNack(msg.getMessageProperties().getDeliveryTag(), false, true);
        }
    }
}
```

---

### 3. â­â­ ä¸­ä¼˜å…ˆçº§ï¼šElasticsearch å•†å“æœç´¢

**ä½œç”¨ï¼š** æå‡å•†å“æœç´¢æ€§èƒ½å’Œå‡†ç¡®æ€§

**ç°çŠ¶ï¼š** ä½¿ç”¨ MySQL LIKE æŸ¥è¯¢ï¼Œæ€§èƒ½å·®ï¼Œä¸æ”¯æŒåˆ†è¯

**å®ç°æ­¥éª¤ï¼š**

#### 3.1 æ·»åŠ ä¾èµ–

```xml
<!-- Elasticsearch -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-elasticsearch</artifactId>
</dependency>
```

#### 3.2 é…ç½® Elasticsearch

```yaml
spring:
  elasticsearch:
    uris: http://localhost:9200
    username: elastic
    password: your-password
```

#### 3.3 åˆ›å»ºå•†å“æ–‡æ¡£å®ä½“

```java
@Document(indexName = "product_index")
public class ProductDocument {
    @Id
    private Long id;
    
    @Field(type = FieldType.Text, analyzer = "ik_max_word")
    private String name;
    
    @Field(type = FieldType.Text, analyzer = "ik_max_word")
    private String description;
    
    // ... å…¶ä»–å­—æ®µ
}
```

#### 3.4 å•†å“æœç´¢æœåŠ¡

```java
@Service
public class ProductSearchService {
    
    @Autowired
    private ElasticsearchRestTemplate elasticsearchTemplate;
    
    public Page<ProductDocument> search(String keyword, Pageable pageable) {
        NativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder();
        
        // å¤šå­—æ®µæœç´¢
        queryBuilder.withQuery(QueryBuilders.multiMatchQuery(keyword, "name", "description"));
        
        // åˆ†é¡µ
        queryBuilder.withPageable(pageable);
        
        return elasticsearchTemplate.queryForPage(queryBuilder.build(), ProductDocument.class);
    }
}
```

---

### 4. â­â­ ä¸­ä¼˜å…ˆçº§ï¼šåˆ†å¸ƒå¼é”ï¼ˆRedis å®ç°ï¼‰

**ä½œç”¨ï¼š** é˜²æ­¢å¹¶å‘é—®é¢˜ï¼ˆå¦‚åº“å­˜æ‰£å‡ã€ä¼˜æƒ åˆ¸é¢†å–ï¼‰

**å®ç°æ­¥éª¤ï¼š**

#### 4.1 æ·»åŠ  Redisson ä¾èµ–

```xml
<dependency>
    <groupId>org.redisson</groupId>
    <artifactId>redisson-spring-boot-starter</artifactId>
    <version>3.24.3</version>
</dependency>
```

#### 4.2 é…ç½® Redisson

```java
@Configuration
public class RedissonConfig {
    
    @Bean
    public RedissonClient redissonClient() {
        Config config = new Config();
        config.useSingleServer()
                .setAddress("redis://localhost:6379")
                .setPassword("123456");
        return Redisson.create(config);
    }
}
```

#### 4.3 ä½¿ç”¨åˆ†å¸ƒå¼é”

```java
@Service
public class SmsCouponServiceImpl {
    
    @Autowired
    private RedissonClient redissonClient;
    
    @Override
    public Long redeemCoupon(Long couponId) {
        String lockKey = "coupon:redeem:" + couponId;
        RLock lock = redissonClient.getLock(lockKey);
        
        try {
            // å°è¯•åŠ é”ï¼Œæœ€å¤šç­‰å¾… 3 ç§’ï¼Œé”å®š 10 ç§’åè‡ªåŠ¨é‡Šæ”¾
            if (lock.tryLock(3, 10, TimeUnit.SECONDS)) {
                // ä¸šåŠ¡é€»è¾‘ï¼šé¢†å–ä¼˜æƒ åˆ¸
                // ...
                return history.getId();
            } else {
                throw new RuntimeException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            throw new RuntimeException("é¢†å–å¤±è´¥");
        } finally {
            if (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }
}
```

---

### 5. â­â­ ä¸­ä¼˜å…ˆçº§ï¼šæ¥å£é™æµï¼ˆRedis + Luaï¼‰

**ä½œç”¨ï¼š** é˜²æ­¢æ¥å£è¢«åˆ·ï¼Œä¿æŠ¤ç³»ç»Ÿ

**å®ç°æ­¥éª¤ï¼š**

#### 5.1 åˆ›å»ºé™æµæ³¨è§£

```java
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RateLimit {
    /**
     * é™æµ key
     */
    String key() default "rate_limit";
    
    /**
     * æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
     */
    int time() default 60;
    
    /**
     * å…è®¸è®¿é—®æ¬¡æ•°
     */
    int count() default 100;
}
```

#### 5.2 åˆ›å»ºé™æµåˆ‡é¢

```java
@Component
@Aspect
public class RateLimitAspect {
    
    @Autowired
    private StringRedisTemplate redisTemplate;
    
    @Around("@annotation(rateLimit)")
    public Object around(ProceedingJoinPoint joinPoint, RateLimit rateLimit) throws Throwable {
        String key = rateLimit.key();
        int time = rateLimit.time();
        int count = rateLimit.count();
        
        // ä½¿ç”¨ Lua è„šæœ¬ä¿è¯åŸå­æ€§
        String luaScript = 
            "local count = redis.call('incr', KEYS[1]) " +
            "if count == 1 then " +
            "    redis.call('expire', KEYS[1], ARGV[1]) " +
            "end " +
            "if count > tonumber(ARGV[2]) then " +
            "    return 0 " +
            "end " +
            "return 1";
        
        DefaultRedisScript<Long> script = new DefaultRedisScript<>();
        script.setScriptText(luaScript);
        script.setResultType(Long.class);
        
        Long result = redisTemplate.execute(script, 
            Collections.singletonList(key), 
            String.valueOf(time), 
            String.valueOf(count));
        
        if (result == 0) {
            throw new RuntimeException("è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
        }
        
        return joinPoint.proceed();
    }
}
```

#### 5.3 ä½¿ç”¨é™æµæ³¨è§£

```java
@RestController
public class AppOrderController {
    
    @RateLimit(key = "order:create", time = 60, count = 10)
    @PostMapping("/create")
    public Result<OmsOrder> createOrder(@RequestBody CreateOrderRequest request) {
        // ...
    }
}
```

---

### 6. â­ ä½ä¼˜å…ˆçº§ï¼šæ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

**ç°çŠ¶ï¼š** ä½¿ç”¨é»˜è®¤ HikariCP é…ç½®

**ä¼˜åŒ–é…ç½®ï¼š**

```yaml
spring:
  datasource:
    hikari:
      # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°
      maximum-pool-size: 20
      # è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°
      minimum-idle: 5
      # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      connection-timeout: 30000
      # ç©ºé—²è¿æ¥å­˜æ´»æœ€å¤§æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      idle-timeout: 600000
      # è¿æ¥æ± åç§°
      pool-name: CoffeeHikariCP
      # è¿æ¥æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      max-lifetime: 1800000
```

---

### 7. â­ ä½ä¼˜å…ˆçº§ï¼šå¼‚æ­¥å¤„ç†ï¼ˆ@Asyncï¼‰

**ä½œç”¨ï¼š** æå‡æ¥å£å“åº”é€Ÿåº¦

**å®ç°æ­¥éª¤ï¼š**

#### 7.1 å¯ç”¨å¼‚æ­¥

```java
@SpringBootApplication
@EnableAsync
public class CoffeeAppApplication {
    // ...
}
```

#### 7.2 åˆ›å»ºçº¿ç¨‹æ± é…ç½®

```java
@Configuration
public class AsyncConfig {
    
    @Bean(name = "taskExecutor")
    public Executor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(10);
        executor.setMaxPoolSize(20);
        executor.setQueueCapacity(200);
        executor.setThreadNamePrefix("async-");
        executor.initialize();
        return executor;
    }
}
```

#### 7.3 ä½¿ç”¨å¼‚æ­¥

```java
@Service
public class OrderServiceImpl {
    
    @Async("taskExecutor")
    public void sendOrderNotification(Long orderId) {
        // å‘é€è®¢å•é€šçŸ¥ï¼ˆé‚®ä»¶ã€çŸ­ä¿¡ç­‰ï¼‰
    }
    
    @Override
    public OmsOrder createOrder(CreateOrderRequest request) {
        // åˆ›å»ºè®¢å•...
        OmsOrder order = ...;
        
        // å¼‚æ­¥å‘é€é€šçŸ¥
        sendOrderNotification(order.getId());
        
        return order;
    }
}
```

---

### 8. â­ ä½ä¼˜å…ˆçº§ï¼šCDN é™æ€èµ„æºåŠ é€Ÿ

**ä½œç”¨ï¼š** åŠ é€Ÿå›¾ç‰‡ã€JSã€CSS ç­‰é™æ€èµ„æºåŠ è½½

**å®ç°ï¼š**
- ä½¿ç”¨é˜¿é‡Œäº‘ OSS + CDN
- æˆ–ä½¿ç”¨è…¾è®¯äº‘ COS + CDN
- MinIO ä¹Ÿå¯ä»¥é…ç½® CDN

---

## ğŸ“¦ æ‰€éœ€ä¸­é—´ä»¶æ¸…å•

### å¿…é¡»æ·»åŠ ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

1. **Redis** âœ… å·²ä½¿ç”¨
2. **RabbitMQ / RocketMQ** âŒ éœ€è¦æ·»åŠ ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰

### å»ºè®®æ·»åŠ ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

3. **Elasticsearch** âŒ éœ€è¦æ·»åŠ ï¼ˆå•†å“æœç´¢ï¼‰
4. **Redisson** âŒ éœ€è¦æ·»åŠ ï¼ˆåˆ†å¸ƒå¼é”ï¼‰

### å¯é€‰æ·»åŠ ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

5. **CDN** âŒ å¯é€‰ï¼ˆé™æ€èµ„æºåŠ é€Ÿï¼‰
6. **Nginx** âŒ å¯é€‰ï¼ˆåå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ï¼‰

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœé¢„æœŸ

| ä¼˜åŒ–é¡¹ | é¢„æœŸæå‡ | å®ç°éš¾åº¦ |
|--------|---------|---------|
| Spring Cache | æŸ¥è¯¢å“åº”æ—¶é—´å‡å°‘ 50-80% | â­â­ ç®€å• |
| æ¶ˆæ¯é˜Ÿåˆ— | æ¥å£å“åº”æ—¶é—´å‡å°‘ 30-50% | â­â­â­ ä¸­ç­‰ |
| Elasticsearch | æœç´¢å“åº”æ—¶é—´å‡å°‘ 70-90% | â­â­â­â­ è¾ƒéš¾ |
| åˆ†å¸ƒå¼é” | é¿å…å¹¶å‘é—®é¢˜ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§ | â­â­â­ ä¸­ç­‰ |
| æ¥å£é™æµ | ä¿æŠ¤ç³»ç»Ÿï¼Œé¿å…è¢«åˆ· | â­â­ ç®€å• |
| å¼‚æ­¥å¤„ç† | æ¥å£å“åº”æ—¶é—´å‡å°‘ 20-40% | â­â­ ç®€å• |

---

## ğŸ“ å®æ–½å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼ˆç«‹å³å®æ–½ï¼Œæ— éœ€æ–°ä¸­é—´ä»¶ï¼‰
1. âœ… Spring Cache ç¼“å­˜
2. âœ… æ¥å£é™æµï¼ˆRedisï¼‰
3. âœ… å¼‚æ­¥å¤„ç†ï¼ˆ@Asyncï¼‰
4. âœ… æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

### ç¬¬äºŒé˜¶æ®µï¼ˆéœ€è¦æ–°ä¸­é—´ä»¶ï¼‰
1. âœ… æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRabbitMQï¼‰
2. âœ… åˆ†å¸ƒå¼é”ï¼ˆRedissonï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼ˆå¯é€‰ï¼‰
1. âœ… Elasticsearchï¼ˆå¦‚æœæœç´¢é‡å¾ˆå¤§ï¼‰
2. âœ… CDNï¼ˆå¦‚æœç”¨æˆ·é‡å¤§ï¼‰

---

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### 1. Spring Cacheï¼ˆæœ€ç®€å•ï¼Œç«‹å³ç”Ÿæ•ˆï¼‰

åªéœ€è¦ï¼š
1. æ·»åŠ é…ç½®ç±» `RedisCacheConfig.java`
2. åœ¨ Service æ–¹æ³•ä¸Šæ·»åŠ  `@Cacheable` æ³¨è§£

### 2. RabbitMQï¼ˆéœ€è¦å®‰è£…ä¸­é—´ä»¶ï¼‰

**Docker å®‰è£…ï¼š**
```bash
docker run -d --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:management
```

è®¿é—®ç®¡ç†ç•Œé¢ï¼šhttp://localhost:15672ï¼ˆguest/guestï¼‰

### 3. Elasticsearchï¼ˆéœ€è¦å®‰è£…ä¸­é—´ä»¶ï¼‰

**Docker å®‰è£…ï¼š**
```bash
docker run -d --name elasticsearch -p 9200:9200 -e "discovery.type=single-node" elasticsearch:8.11.0
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼š** æ›´æ–°æ•°æ®æ—¶è®°å¾—æ¸…é™¤ç›¸å…³ç¼“å­˜
2. **æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆæ¯ä¸¢å¤±ï¼š** é…ç½®æ¶ˆæ¯æŒä¹…åŒ–å’Œç¡®è®¤æœºåˆ¶
3. **åˆ†å¸ƒå¼é”æ­»é”ï¼š** è®¾ç½®åˆç†çš„é”è¶…æ—¶æ—¶é—´
4. **é™æµç­–ç•¥ï¼š** æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´é™æµå‚æ•°

